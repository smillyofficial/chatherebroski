<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Clone - RBLX Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #313338; color: #dbdee1; overflow: hidden; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #2b2d31; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 4px; }
        .sidebar-icon { transition: all 0.2s; cursor: pointer; }
        .sidebar-icon:hover { border-radius: 16px; background-color: #5865f2; color: white; }
    </style>
</head>
<body class="h-screen flex">

    <!-- Sidebar (Servers) -->
    <div class="w-18 bg-[#1e1f22] flex flex-col items-center py-3 space-y-2 flex-shrink-0">
        <div class="w-12 h-12 bg-[#5865f2] rounded-[24px] flex items-center justify-center text-white sidebar-icon mb-2">
            <i data-lucide="message-square"></i>
        </div>
        <div class="w-8 h-[2px] bg-[#35363c] rounded-full mb-2"></div>
        <div class="w-12 h-12 bg-[#313338] rounded-[24px] flex items-center justify-center text-[#23a559] sidebar-icon">
            <i data-lucide="plus"></i>
        </div>
    </div>

    <!-- Channels List -->
    <div class="w-60 bg-[#2b2d31] flex flex-col flex-shrink-0">
        <div class="h-12 border-b border-[#1f2124] flex items-center px-4 font-bold text-white shadow-sm">
            Community Hub
        </div>
        <div class="flex-1 py-4 px-2 space-y-1">
            <div class="text-[#949ba4] text-xs font-bold uppercase px-2 mb-1">Text Channels</div>
            <div class="flex items-center space-x-2 px-2 py-1.5 bg-[#3f4147] text-white rounded cursor-pointer">
                <span class="text-[#949ba4] font-light text-xl">#</span>
                <span class="font-medium">breaking-rblx-chat</span>
            </div>
        </div>
        
        <!-- User Section -->
        <div id="user-footer" class="bg-[#232428] p-2 flex items-center space-x-2">
            <img id="footer-pfp" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Guest" class="w-8 h-8 rounded-full bg-[#313338]">
            <div class="flex-1 overflow-hidden">
                <div id="footer-username" class="text-sm font-bold text-white truncate">Guest</div>
                <div class="text-xs text-[#b5bac1]">Online</div>
            </div>
            <button onclick="toggleSettings(true)" class="p-1.5 hover:bg-[#3f4147] rounded text-[#b5bac1]">
                <i data-lucide="settings" class="w-5 h-5"></i>
            </button>
        </div>
    </div>

    <!-- Main Chat Area -->
    <div class="flex-1 flex flex-col bg-[#313338]">
        <div class="h-12 border-b border-[#1f2124] flex items-center px-4 shadow-sm">
            <span class="text-[#949ba4] font-light text-2xl mr-2">#</span>
            <span class="font-bold text-white">breaking-rblx-chat</span>
        </div>

        <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar">
            <!-- System Welcome Message -->
            <div class="flex space-x-4 px-4 py-2">
                <div class="w-10 h-10 rounded-full bg-[#5865f2] flex items-center justify-center text-white">
                    <i data-lucide="bot" class="w-6 h-6"></i>
                </div>
                <div>
                    <div class="flex items-center space-x-2">
                        <span class="font-bold text-[#5865f2]">System</span>
                        <span class="text-[10px] text-[#949ba4]">Welcome Bot</span>
                    </div>
                    <div class="text-[#dbdee1]">Welcome to the Breaking RBLX Chat! Since we aren't using a database, messages will stay as long as you keep the window open. Change your name in settings!</div>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-4">
            <div class="bg-[#383a40] rounded-lg px-4 py-2.5 flex items-center">
                <button class="text-[#b5bac1] hover:text-white mr-3">
                    <i data-lucide="circle-plus"></i>
                </button>
                <input id="chat-input" type="text" placeholder="Message #breaking-rblx-chat" class="bg-transparent flex-1 outline-none text-[#dbdee1] placeholder-[#6d6f78]">
                <div class="flex space-x-3 text-[#b5bac1]">
                    <i data-lucide="gift" class="cursor-pointer hover:text-white"></i>
                    <i data-lucide="sticky-note" class="cursor-pointer hover:text-white"></i>
                    <i data-lucide="smile" class="cursor-pointer hover:text-white"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/80">
        <div class="bg-[#313338] w-full max-w-md rounded-lg overflow-hidden shadow-2xl border border-[#1f2124]">
            <div class="p-6">
                <h2 class="text-xl font-bold text-white mb-6">User Settings</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-[#b5bac1] uppercase mb-2">Display Name</label>
                        <input id="setting-username" type="text" class="w-full bg-[#1e1f22] p-2.5 rounded border-none outline-none text-white focus:ring-2 focus:ring-[#5865f2]">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-[#b5bac1] uppercase mb-2">PFP Seed (Type anything to change avatar)</label>
                        <input id="setting-pfp-seed" type="text" placeholder="e.g. dragon, cool-guy, roblox" class="w-full bg-[#1e1f22] p-2.5 rounded border-none outline-none text-white focus:ring-2 focus:ring-[#5865f2]">
                    </div>
                </div>

                <div class="mt-8 flex justify-end space-x-3">
                    <button onclick="toggleSettings(false)" class="px-4 py-2 text-white hover:underline">Cancel</button>
                    <button onclick="saveSettings()" class="bg-[#5865f2] hover:bg-[#4752c4] text-white px-6 py-2 rounded font-medium transition">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Use LocalStorage to save your profile on your own computer
        let userProfile = {
            username: localStorage.getItem('dc_username') || "Guest_" + Math.floor(Math.random() * 9999),
            pfp: localStorage.getItem('dc_pfp') || "https://api.dicebear.com/7.x/avataaars/svg?seed=" + Math.random()
        };

        const chatContainer = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const footerUsername = document.getElementById('footer-username');
        const footerPfp = document.getElementById('footer-pfp');
        const settingsModal = document.getElementById('settings-modal');
        const settingUsername = document.getElementById('setting-username');
        const settingPfpSeed = document.getElementById('setting-pfp-seed');

        function updateUI() {
            footerUsername.innerText = userProfile.username;
            footerPfp.src = userProfile.pfp;
            lucide.createIcons();
        }

        function toggleSettings(show) {
            if (show) {
                settingUsername.value = userProfile.username;
                settingPfpSeed.value = "";
                settingsModal.classList.remove('hidden');
            } else {
                settingsModal.classList.add('hidden');
            }
        }

        function saveSettings() {
            const newName = settingUsername.value.trim();
            const seed = settingPfpSeed.value.trim();
            
            if (newName) {
                userProfile.username = newName;
                localStorage.setItem('dc_username', newName);
            }
            
            if (seed) {
                const newPfp = `https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(seed)}`;
                userProfile.pfp = newPfp;
                localStorage.setItem('dc_pfp', newPfp);
            }
            
            updateUI();
            toggleSettings(false);
        }

        function addMessage(username, pfp, text, isSystem = false) {
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const msgEl = document.createElement('div');
            msgEl.className = 'flex space-x-4 group hover:bg-[#2e3035] -mx-4 px-4 py-1 transition-colors';
            msgEl.innerHTML = `
                <img src="${pfp}" class="w-10 h-10 rounded-full mt-1 flex-shrink-0 bg-[#1e1f22]">
                <div class="flex-1 overflow-hidden">
                    <div class="flex items-center space-x-2">
                        <span class="font-bold ${isSystem ? 'text-[#5865f2]' : 'text-white'} hover:underline cursor-pointer">${username}</span>
                        <span class="text-[10px] text-[#949ba4] font-medium">${time}</span>
                    </div>
                    <div class="text-[#dbdee1] leading-relaxed break-words">${text}</div>
                </div>
            `;
            chatContainer.appendChild(msgEl);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && chatInput.value.trim()) {
                addMessage(userProfile.username, userProfile.pfp, chatInput.value.trim());
                chatInput.value = '';
            }
        });

        // Initial setup
        updateUI();
        lucide.createIcons();
    </script>
</body>
</html>
